app-id: com.blockstream.Green
runtime: org.kde.Platform
runtime-version: '6.4'
sdk: org.kde.Sdk
command: green

finish-args:
  - --share=network
  - --socket=fallback-x11
  - --socket=wayland
  - --share=ipc
  - --talk-name=org.freedesktop.portal.Background
  - --device=all

modules: 
  - name: green
    buildsystem: simple
    build-commands:
      - install -D green ${FLATPAK_DEST}/bin/green
      - desktop-file-install --dir ${FLATPAK_DEST}/share/applications com.blockstream.Green.desktop
      - install -Dm644 green.png ${FLATPAK_DEST}/share/icons/hicolor/512x512/apps/com.blockstream.Green.png
      - install -Dm644 com.blockstream.Green.metainfo.xml ${FLATPAK_DEST}/share/metainfo/com.blockstream.Green.metainfo.xml

    sources:
      - type: archive
        url: https://github.com/Blockstream/green_qt/releases/download/release_1.2.0/BlockstreamGreen_Linux_x86_64.tar.gz
        sha256: da02e00b4194e10c197f5a45062fabaa1766110f1312efac786d55c27d923412
        strip-components: 0

      - type: file
        url: https://github.com/Blockstream/green_qt/raw/release_1.2.0/assets/icons/green.png
        sha256: c5d093a7a630ed480aafeec91289f00150eb90423c2928f8a47b8db2d9440079

      - type: file
        path: com.blockstream.Green.desktop

      - type: file
        path: com.blockstream.Green.metainfo.xml
